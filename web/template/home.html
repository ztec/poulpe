<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Emoji search engine. Search emoji by text to find the right one">
    <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
    <link href="/statics/font.css" rel="stylesheet">
    <link href="/statics/style.css" rel="stylesheet">
    <title>üêô Poulpe - emoji search engine</title>

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://{{.Hostname}}/statics/poster.jpg"/>
    <meta name="twitter:image:alt" content="Emoji search result for Love. How cute :-p"/>
    <meta name="twitter:title" content="üêô Poulpe - emoji search engine"/>
    <meta name="twitter:description" content="Emoji search engine. Search emoji by text to find the right one for you"/>

    <meta property="og:title" content="üêô Poulpe - emoji search engine" />
    <meta property="og:description" content="Emoji search engine. Search emoji by text to find the right one for you" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://{{.Hostname}}" />
    <meta property="og:image" content="https://{{.Hostname}}/statics/poster.jpg"/>


</head>
<body class="z-theme dark">

<div class="z-header-bar"></div>
<div class="content head-margin">
</div>
<div class="content">
    <div class="search">
        <div class="title"><h1>üêô Emoji search engine</h1></div>
        <div id="searchHeader" class="searchHeader hide">
            <div class="headerItem">DUMMY</div>
        </div>
        <div class="query">
            <input type="text" placeholder="Search..." name="search" onkeyup="onSearchType()" autofocus>
        </div>
        <div id="searchResults" class="results hide">

        </div>
        <script>


            const NO_RESULT = `
                    <div class="noresult">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
\t viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" width="128" height="128" xml:space="preserve">
<g>
\t<g>
\t\t<path style="fill:#F3F1F3;" d="M493.297,159.693c-12.477-30.878-31.231-59.828-56.199-84.792c-24.964-24.967-53.914-43.722-84.793-56.199
\t\t\tC321.426,6.222,288.617,0,255.823,0c-32.748,0-65.497,6.249-96.315,18.743c-30.814,12.491-59.695,31.244-84.607,56.159
\t\t\tc-24.915,24.912-43.668,53.793-56.158,84.607C6.25,190.325,0.001,223.073,0.001,255.823c0,32.794,6.222,65.602,18.701,96.484
\t\t\tc12.477,30.878,31.231,59.828,56.199,84.793c24.964,24.967,53.914,43.722,84.792,56.199c30.882,12.48,63.69,18.701,96.484,18.701
\t\t\tc32.748,0,65.497-6.249,96.314-18.743c30.814-12.49,59.695-31.242,84.607-56.158c24.917-24.913,43.67-53.794,56.16-84.608
\t\t\tc12.493-30.817,18.743-63.566,18.743-96.315C511.999,223.383,505.778,190.575,493.297,159.693z M461.611,339.661
\t\t\tc-10.821,26.683-27.019,51.648-48.659,73.291c-21.643,21.64-46.608,37.837-73.292,48.657
\t\t\tc-26.679,10.818-55.078,16.241-83.484,16.241c-28.477,0-56.947-5.405-83.688-16.213c-26.744-10.813-51.76-27.007-73.441-48.685
\t\t\tc-21.678-21.682-37.873-46.697-48.685-73.441C39.554,312.77,34.149,284.3,34.149,255.823c0-28.406,5.423-56.804,16.241-83.484
\t\t\tc10.821-26.683,27.018-51.648,48.659-73.291c21.643-21.64,46.608-37.837,73.291-48.659c26.679-10.818,55.078-16.241,83.484-16.241
\t\t\tc28.477,0,56.947,5.405,83.688,16.214c26.744,10.813,51.76,27.008,73.441,48.685c21.677,21.681,37.873,46.697,48.685,73.441
\t\t\tc10.808,26.741,16.214,55.211,16.214,83.688C477.852,284.583,472.429,312.981,461.611,339.661z"/>
\t</g>
</g>
<g>
\t<g>
\t\t<path style="fill:#F3F1F3;" d="M385.946,126.055c-6.524-6.525-17.102-6.525-23.626,0l-36.278,36.278c-7.82-5.861-16.298-10.691-25.249-14.389
\t\t\tc-14.036-5.803-29.225-8.832-44.792-8.83c-15.572-0.002-30.761,3.027-44.797,8.83c-14.037,5.799-26.917,14.372-37.901,25.36
\t\t\tc-11.376,11.375-19.956,24.598-25.656,38.689c-5.704,14.094-8.547,29.054-8.548,44.007c0,14.954,2.843,29.914,8.548,44.007
\t\t\tc3.693,9.131,8.603,17.892,14.691,26.027l-36.285,36.285c-6.524,6.524-6.524,17.102,0,23.627c6.525,6.524,17.102,6.524,23.627,0
\t\t\tl36.278-36.278c7.82,5.861,16.298,10.691,25.249,14.389c14.036,5.803,29.225,8.832,44.792,8.83
\t\t\tc15.572,0.002,30.761-3.027,44.797-8.83c14.037-5.799,26.917-14.372,37.901-25.359c11.376-11.375,19.955-24.599,25.656-38.689
\t\t\tc5.704-14.094,8.547-29.054,8.548-44.007c0-14.954-2.843-29.914-8.548-44.008c-3.693-9.131-8.603-17.892-14.691-26.027
\t\t\tl36.285-36.285C392.47,143.157,392.47,132.579,385.946,126.055z M178.621,287.472c-4.066-10.044-6.108-20.754-6.107-31.471
\t\t\tc0-10.717,2.042-21.428,6.107-31.472c4.07-10.047,10.146-19.431,18.31-27.599c7.908-7.906,17.06-13.98,27.036-18.106
\t\t\tc9.978-4.122,20.783-6.295,32.033-6.296c11.245,0.002,22.051,2.174,32.03,6.297c4.897,2.025,9.593,4.525,14.044,7.476
\t\t\tL186.305,302.069C183.229,297.418,180.669,292.53,178.621,287.472z M333.38,287.472c-4.07,10.047-10.146,19.431-18.31,27.599
\t\t\tc-7.908,7.906-17.06,13.98-27.036,18.106c-9.978,4.122-20.783,6.295-32.033,6.296c-11.245-0.002-22.05-2.174-32.03-6.297
\t\t\tc-4.897-2.025-9.593-4.526-14.044-7.476l115.769-115.769c3.076,4.651,5.636,9.539,7.684,14.597
\t\t\tc4.066,10.044,6.108,20.754,6.107,31.472C339.488,266.717,337.446,277.427,333.38,287.472z"/>
\t</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
                <h3>NO RESULTS</h3>
            </div>

                    `

            const editIcon = `<svg id="Layer_1" style="enable-background:new 0 0 512 512; margin-bottom: -3px;" version="1.1" viewBox="0 0 512 512" width="16" height="16" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
\t.st0{fill:#AAA8AA;}
</style><g><g><path class="st0" d="M328.7,398.6H155.6c-24.7,0-44.7-20.1-44.7-44.7V180.7c0-24.7,20.1-44.7,44.7-44.7h105.6c11,0,20,9,20,20    s-9,20-20,20H155.6c-2.6,0-4.7,2.1-4.7,4.7v173.1c0,2.6,2.1,4.7,4.7,4.7h173.1c2.6,0,4.7-2.1,4.7-4.7V251.2c0-11,9-20,20-20    s20,9,20,20v102.7C373.4,378.5,353.4,398.6,328.7,398.6z"/></g><g><g><rect class="st0" height="116" transform="matrix(-0.6844 -0.7291 0.7291 -0.6844 329.9216 582.7335)" width="50.9" x="265.7" y="162"/></g><g><path class="st0" d="M354.8,135.9l24.3,25.9c2.9,3.1,2.8,8-0.3,10.9l-21.8,20.5L322,156l21.8-20.5     C347,132.6,351.8,132.8,354.8,135.9z"/></g><g><polygon class="st0" points="225.3,246.8 260.1,283.9 210.9,295.2    "/></g></g></g></svg>`

            const externalIcon = `<svg style="margin-bottom: -3px;" width="16" height="16"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><style>.cls-1{fill:#fff;opacity:0;}.cls-2{fill:#AAA8AA;}</style></defs><title>external-link</title><g id="Layer_2" data-name="Layer 2"><g id="external-link"><g id="external-link-2" data-name="external-link"><rect class="cls-1" width="24" height="24"/><path class="cls-2" d="M20,11a1,1,0,0,0-1,1v6a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V6A1,1,0,0,1,6,5h6a1,1,0,0,0,0-2H6A3,3,0,0,0,3,6V18a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V12A1,1,0,0,0,20,11Z"/><path class="cls-2" d="M16,5h1.58l-6.29,6.28a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L19,6.42V8a1,1,0,0,0,1,1h0a1,1,0,0,0,1-1V4a1,1,0,0,0-1-1L16,3h0a1,1,0,0,0,0,2Z"/></g></g></g></svg>`



            function removeSearchingClass() {
                if (fetchController.length <= 0) {
                    document.getElementsByClassName("search")[0].classList.remove("searching")
                    // console.log("removed searching")
                } else {
                    // console.log("there is on flight requests cannot remove searching", fetchController.length)
                }
            }

            let lastSearch = ""
            let fetchController = [];

            function onSearchType() {
                const input = document.getElementsByName("search")[0]

                const searchText = input.value
                if (searchText === "") {
                    hideResult()
                    return
                }
                if (lastSearch === searchText) {
                    return;
                }
                lastSearch = searchText
                document.getElementsByClassName("search")[0].classList.add("searching")
                // console.log("search", searchText)
                const lt = fetchController.length
                for (let i = 0; i < lt; i++) {
                    fetchController.shift().abort(searchText)
                }
                const ct = new AbortController()
                fetchController.push(ct)
                signal = ct.signal
                const apiUrl = "/search"
                fetch(apiUrl + '?q=' + searchText, {signal: signal}).then(
                    async (response) => {
                        // console.log("resolve", searchText)
                        displayResults(searchText, (await response.json()))
                        fetchController.shift()
                        removeSearchingClass()
                    },
                    (error) => {
                        // console.log("reject", searchText)
                        removeSearchingClass()
                    }
                )
            }

            function hideResult() {
                document.getElementById('searchResults').classList.add("hide")
                document.getElementById('searchHeader').classList.add("hide")
            }

            function displayResults(searchText, resultsData) {
                const resultsDiv = document.getElementById('searchResults')
                const headerDiv = document.getElementById('searchHeader')

                nbResults = (!resultsData || !Array.isArray(resultsData) ? 0 : resultsData.length);
                headerDiv.innerHTML = `
                     <div class="headerItem emojiResults"><span>Emoji ${nbResults} </span></div>
                `

                headerDiv.classList.remove("hide")

                let emmojiResultsHTM = NO_RESULT
                if (nbResults <= 0) {
                    resultsHTML = NO_RESULT
                } else {
                    const emojiHTML = []
                    resultsData.forEach((item) => {
                        emojiHTML.push(`
                        <div class="pinboard-item-result emoji-item-result">
                          <h1>${item.emoji ? item.emoji : '[no emoji representation]'} ${item.aliases.length ? generateEmojiAliasHtml(item.aliases) : item.description}</h1>
                          <span class="smallprint">
                                <a class="tag" href="" onClick="onClickReplaceSearch('unicode_version: ${item.unicode_version} '); return false;">${item.unicode_version} </a>
                                ${item.category ? ' - ' + generateEmojiCategoryHtml([item.category]) : ''}
                                ${item.tags.length ? "- " + generateEmojiTagHtml(item.tags) : ''}
                          </span>
                          <div class="description">${item.description}</div>
                        </div>
                        `)
                    })
                    emmojiResultsHTM = emojiHTML.join('')
                }


                resultsDiv.innerHTML = `
                <div  class="emojiResults searchResultsContent select" > ${emmojiResultsHTM}</div>
                `
                resultsDiv.classList.remove("hide")
            }

            function generateEmojiCategoryHtml(tags) {
                return tags.map((tag) => {
                    return `<a class="tag" href="" onClick="onClickReplaceSearch('category: ${tag}'); return false;">${tag}</a>`
                }).join(' ')
            }

            function generateEmojiAliasHtml(tags) {
                return tags.map((tag) => {
                    return `${tag}`
                }).join(' - ')
            }

            function generateEmojiTagHtml(tags) {
                return tags.map((tag) => {
                    return `<a class="tag" href="" onClick="onClickReplaceSearch('tags: ${tag}'); return false;">${tag}</a>`
                }).join(' ')
            }

            function onClickReplaceSearch(query) {
                document.getElementsByName("search")[0].value = query
                onSearchType()
                return false
            }

            function onClickTag(tag) {
                document.getElementsByName("search")[0].value = "tags:" + tag
                onSearchType()
                return false
            }
            onSearchType()
        </script>
    </div>
</div>
</body>
</html>